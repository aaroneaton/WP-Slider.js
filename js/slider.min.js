/*! Slider.js by @greweb - http://demo.greweb.fr/slider */
(function(c){var b=function(e,d){return e-Math.floor(e/d)*d};var a=function(e){var d=c('<div class="slider"><div class="loader"><span class="spinner"></span> Loading photos... (<span class="percent">0</span>%)</div><div class="slide-images"></div><div class="options"><a class="prevSlide" href="javascript:;">prev</a><span class="slide-pager"></span><a class="nextSlide" href="javascript:;">next</a></div></div>');d.find(".slide-images").append(c.map(e.slides,function(f){return c('<div class="slide-image">'+(f.link?'<a href="'+f.link+'" target="_blank">':"")+'<img src="'+f.src+'"><span class="caption">'+f.name+"</span>"+(f.link?"</a>":"")+"</div>")[0]}));d.find(".slide-pager").append(c.map(e.slides,function(f,g){return c('<a href="javascript:;">'+(g+1)+"</a>")[0]}));return d};window.Slider=function(d){var e=this;e.container=c(d);e.current=0;e.lastHumanNav=0;e.duration=5000;e.circular=function(f){return b(f,e.slides.size())};e.slide=function(f){f=Math.max(0,Math.min(f,e.slides.size()-1));if(e.node){e.slides.eq(e.current).removeClass("current");e.slides.eq(f).addClass("current");e.pages.eq(e.current).removeClass("current");e.pages.eq(f).addClass("current")}e.current=f;return e};e.next=function(){e.slide(e.circular(e.current+1))};e.prev=function(){e.slide(e.circular(e.current-1))};e.setDuration=function(f){e.duration=f&&f>0?f:5000;return e};e.setTransition=function(f){if(e.node){e.transition&&e.node.removeClass(e.transition);f&&e.node.addClass(f)}e.transition=f;return e};e.setTheme=function(f){if(e.node){e.theme&&e.node.removeClass(e.theme);f&&e.node.addClass(f)}e.theme=f;return e};e.setSize=function(f,g){e.w=f;e.h=g;if(e.node){e.node.width(f);e.node.find(".slide-image").width(f);e.node.find(".slide-images, .slider-image").height(g)}return e};e.fetchJson=function(h,g,f){var i=c.extend({},g);if(!f){f=function(j){return j}}e.container.empty();c.getJSON(h,i,function(j){e.setPhotos(f(j))});return e};e._sync=function(){e.setTransition(e.transition);e.setTheme(e.theme||"theme-dark");e.setSize(e.w||"640px",e.h||"430px");e.slides&&e.slide(e.current||0)};e.setPhotos=function(g){e.node=a({slides:g}).addClass("loading");e.container.empty().append(e.node);e.current=0;e._sync();var f=0;var h=e.node.find(".slide-image img").bind("load",function(){var i=h.size();if(++f==i){e.node.removeClass("loading");e.start()}e.node.find(".loader .percent").text(Math.floor(100*f/i))});if(h.size()==0){e.node.find(".loader").text("No photo")}return e};e.start=function(){e.slides=e.node.find(".slide-image");e.pages=e.node.find(".slide-pager a");e._sync();e._bind();return e};e._bind=function(){e.node.find(".prevSlide").click(function(){e.prev()});e.node.find(".nextSlide").click(function(){e.next()});e.node.find(".slide-pager a").each(function(h){c(this).click(function(){e.slide(h)})});var g=function(){return new Date().getTime()};e.node.find(".options a").click(function(){e.lastHumanNav=g()});if(!e.timeout){var f=function(){if(g()-e.lastHumanNav>2000){e.next()}e.timeout=setTimeout(f,e.duration)};e.timeout=setTimeout(f,e.duration)}return e}}}(jQuery));